<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/join.css">
    <title>Join</title>
</head>
<body>
    <div>
        <a href="/">
            <img id="top_logo" src="../img/CI-white2.png">
        </a>
    </div>
    <p id="id_list" style="display: none;" ><%= JSON.stringify(id_list) %></p>
    <p id="nick_list" style="display: none;" ><%= JSON.stringify(nick_list) %></p>
    <p id="mail_list" style="display: none;" ><%= JSON.stringify(mail_list) %></p>
    <form action="/add" method="POST" id="join">
        <fieldset> 
            <div style="text-align: left; margin-left: 25%;">
            <span class="input_text_title">아이디</span><br>
            <input class="input_text" type="text" name="id" id="id" onchange="check_id(this.id)">
            <div style="text-align: left;" id="same_id"></div><br>
            <span class="input_text_title">비밀번호</span><br>
            <input class="input_text" type="password" name="pwd" id="pwd" onchange="check_pwd()"><br><br>
            <span class="input_text_title">비밀번호 재확인</span><br>
            <input class="input_text" type="password" name="pwd_check" id="pwd_check"  onchange="check_pwd()">
            <div style="text-align: left;" id="same_pwd"></div>
            <br><br>
            <span class="input_text_title">이름</span> <br>
            <input class="input_text" type="text" name="name"><br><br>
            <span class="input_text_title">생년월일</span><br>
            <input class="input_text" type="date" name="birthday"><br><br>
            <span class="input_text_title">닉네임</span><br>
            <input class="input_text" type="text" name="nickname" id="nickname" onchange="check_nick(this.id)">
            <div style="text-align: left;" id="same_nick"></div><br>
            <span class="input_text_title">이메일</span><br>
            <input class="input_text" type="email" name="email" id="email" onchange="check_mail(this.id)"><br>
            <table>
                <tr>
                    <td style="width: 31em;">
                        <div id="same_mail" style="text-align: left;"></div>
                    </td>
                    <td>
                        <input type="checkbox" name="check_info">맞춤혜택 및 광고/마케팅 수신을 동의합니다.
                    </td>
                </tr>
            </table>               
            <br><br><br>
            </div>
        </fieldset> 
    </form>
            <div style="background-color: #F6F6F6; padding-bottom: 1em;">
            <div style="text-align: left; margin-left: 25%; margin-top: 0%; margin-right: 25%;">
                <br>
                <span class="input_text_title">나의 체형 정보 (최대 3개 선택) <span style="color: #61A0E8;">(필수)</span></span><br><br>
                <div>
                    <button class="choice_btn" id="btn1-1" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">영양 부족</button>
                    <button class="choice_btn" id="btn1-2" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">저체중</button>
                    <button class="choice_btn" id="btn1-3" style="background-color: white;" onclick="choose_btn1(this.id)">정상체중</button><br><br>
                    <button class="choice_btn" id="btn1-4" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">과체중</button>
                    <button class="choice_btn" id="btn1-5"  style="background-color: white;" onclick="choose_btn1(this.id)">비만</button>
                </div>
                </div>
                
                
                <hr style="margin-left: 10%; margin-right: 10%; border-color: #999999; border-width: 2px;">
                <div style="text-align: left; margin-left: 25%; margin-top: 0; margin-right: 25%;">
                <div>
                    <button class="choice_btn" id="btn1-6" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">상체 비만</button>
                    <button class="choice_btn" id="btn1-7" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">하체 비만</button>
                    <button class="choice_btn" id="btn1-8" style="background-color: white;" onclick="choose_btn1(this.id)">마른 비만</button><br><br>
                    <button class="choice_btn" id="btn1-9" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">초고도비만</button>
                    <button class="choice_btn" id="btn1-10" style="margin-right: 30px; background-color: white;" onclick="choose_btn1(this.id)">뱃살 과다</button>
                    <button class="choice_btn" id="btn1-11" style="background-color: white;" onclick="choose_btn1(this.id)">근육 부족</button>
                    <br><br>
                </div>
                <span class="input_text_title">나의 건강 정보 (최대 3개 선택) <span style="color: #61A0E8;">(필수)</span></span><br><br>
                <div>
                    <button class="choice_btn" id="btn2-1" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">저혈압</button>
                    <button class="choice_btn" id="btn2-2" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">고혈압</button>
                    <button class="choice_btn" id="btn2-3" style="background-color: white;" onclick="choose_btn2(this.id)">빈혈</button><br><br>
                    <button class="choice_btn" id="btn2-4" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">디스크</button>
                    <button class="choice_btn" id="btn2-5" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">면역력 부족</button>
                    <button class="choice_btn" id="btn2-6" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">편두통</button>
                    <button class="choice_btn" id="btn2-7" style="background-color: white;" onclick="choose_btn2(this.id)">비염</button><br><br>
                    <button class="choice_btn" id="btn2-8" style="width: 10em; margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">코로나19 확진 경험</button>
                    <button class="choice_btn" id="btn2-9" style="margin-right: 30px; background-color: white;" onclick="choose_btn2(this.id)">고지혈증</button>
                    <button class="choice_btn" id="btn2-10" style="background-color: white;" onclick="choose_btn2(this.id)">당뇨</button>
                    <br><br>
                </div>
            · 해당 정보는 맞춤 건강 관리 서비스를 위한 데이터 수집 목적으로 활용될 예정입니다.
            </div>
        </div>
        <div>
            <br>
                <button type="submit" id="finish_btn" data-toggle="modal" data-target="#finish" form="join">회원가입 완료</button>
            <br><br> 
        </div>

    <!-- Modal -->
    <div class="modal fade" id="finish" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body" style="font-weight: bold; font-size: 1.5em;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="location.href='/login'">
                    <span aria-hidden="true">&times;</span>
                </button> <br>
                The Healthiest 회원이 되신 것을<br> 축하드립니다!
                <br><br>
            </div>
        </div>
        </div>
    </div>
    <script>
        var count1 = 0;
        var count2 = 0;

        function choose_btn1(id){
            console.log(id);
            var choice_id = document.getElementById(id); 
            if ( choice_id.style.backgroundColor == "white"){
                if (count1 == 3) return;
                choice_id.style.backgroundColor = "#B5EBFF";
                count1 = count1 + 1;
            } else {
                choice_id.style.backgroundColor = "white";
                count1 = count1-1;
            }
        }
        function choose_btn2(id){
            console.log(id);
            var choice_id = document.getElementById(id); 
            if ( choice_id.style.backgroundColor == "white"){
                if (count2 == 3) return;
                choice_id.style.backgroundColor = "#DFF780";
                count2 = count2+1;
            } else {
                choice_id.style.backgroundColor = "white";
                count2 = count2-1;
            }
        }

        function check_pwd(){
                if(document.getElementById('pwd').value==document.getElementById('pwd_check').value){
                    document.getElementById('same_pwd').innerHTML='비밀번호가 일치합니다.'
                    document.getElementById('same_pwd').style.color='blue';
                }
                else{
                    document.getElementById('same_pwd').innerHTML='비밀번호가 일치하지 않습니다.';
                    document.getElementById('same_pwd').style.color='red';
                }
        }

        function check_id(id){
            var input_id = document.getElementById(id);
            var id_list = document.getElementById('id_list').innerHTML;
            if (id_list.indexOf(input_id.value) != -1) {
                document.getElementById('same_id').innerHTML='이미 사용중인 아이디입니다.';
                document.getElementById('same_id').style.color='red';
            } else {
                document.getElementById('same_id').innerHTML='사용가능합니다.';
                document.getElementById('same_id').style.color='blue';
            }
        };

        function check_nick(id){
            var input_id = document.getElementById(id);
            var nick_list = document.getElementById('nick_list').innerHTML;
            if (nick_list.includes(input_id.value)) {
                document.getElementById('same_nick').innerHTML='이미 사용중인 닉네임입니다.'
                document.getElementById('same_nick').style.color='red';
            } else {
                document.getElementById('same_nick').innerHTML='사용가능합니다.'
                document.getElementById('same_nick').style.color='blue';
            }
        };

        function check_mail(id){
            var input_id = document.getElementById(id);
            var mail_list = document.getElementById('mail_list').innerHTML;
            if (mail_list.includes(input_id.value)) {
                document.getElementById('same_mail').innerHTML='이미 사용중인 이메일입니다.'
                document.getElementById('same_mail').style.color='red';
            } else {
                document.getElementById('same_mail').innerHTML='사용가능합니다.'
                document.getElementById('same_mail').style.color='blue';
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
</body>
</html>